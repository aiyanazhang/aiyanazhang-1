# Python多线程演示项目使用指南

## 快速开始

### 1. 安装依赖

```bash
cd python-threading-demo
pip install -r requirements.txt
```

### 2. 运行演示

```bash
python main.py
```

## 演示内容

### 1. 基础线程创建演示
- 演示 `threading.Thread` 的基本用法
- 包含函数式线程创建、参数传递、守护线程等

### 2. 线程类继承演示
- 演示通过继承 `Thread` 类创建自定义线程
- 包含计算线程、文件处理线程、监控线程等

### 3. 线程池演示
- 演示 `ThreadPoolExecutor` 的使用
- 包含基础线程池、map方法、异常处理、超时机制等

### 4. 线程状态监控演示
- 演示线程状态监控和性能指标
- 包含实时监控、异常监控、系统资源监控等

### 5. 线程生命周期管理演示
- 演示线程从创建到销毁的完整生命周期
- 包含优雅关闭、资源清理、信号处理等

### 6. 线程异常处理演示
- 演示多线程环境下的异常处理策略
- 包含异常捕获、恢复机制、监控告警等

### 7. 互斥锁演示
- 演示 `Lock` 和 `RLock` 的使用
- 包含基础锁、可重入锁、死锁预防、超时机制等

### 8. 条件变量演示
- 演示 `Condition` 的使用场景
- 包含生产者-消费者模式、任务调度等

### 9. 信号量演示
- 演示 `Semaphore` 控制资源访问
- 包含资源池管理、并发限制、超时处理等

### 10. 线程通信演示
- 演示队列、事件等线程间通信
- 包含Queue通信、Event通信、线程本地存储等

## 交互式使用

程序启动后会显示菜单，您可以：

- 输入数字选择特定演示
- 输入 `a` 或 `all` 运行所有演示  
- 输入 `0` 或 `q` 退出程序

## 学习建议

1. **按顺序学习**: 建议从基础线程创建开始，逐步学习更高级的概念
2. **观察输出**: 仔细观察每个演示的控制台输出，理解线程的执行顺序和交互
3. **修改参数**: 可以修改代码中的参数（如线程数量、延时等）观察效果变化
4. **阅读源码**: 演示代码包含详细注释，建议结合源码学习

## 常见概念

### 线程状态
- **NEW**: 线程已创建但未启动
- **RUNNABLE**: 线程正在运行或等待CPU时间
- **BLOCKED**: 线程被阻塞等待监视器锁
- **WAITING**: 线程无限期等待另一个线程的特定操作
- **TIMED_WAITING**: 线程等待另一个线程的操作达到指定等待时间
- **TERMINATED**: 线程已退出

### 同步机制
- **Lock**: 互斥锁，确保同一时间只有一个线程访问资源
- **RLock**: 可重入锁，同一线程可以多次获取
- **Condition**: 条件变量，允许线程等待特定条件
- **Semaphore**: 信号量，控制对资源的并发访问数量
- **Event**: 事件对象，用于线程间的简单通信

### 通信方式
- **Queue**: 线程安全的队列，用于线程间数据传递
- **Event**: 简单的线程同步原语
- **local**: 线程本地存储，每个线程有独立的数据副本

## 故障排除

### 常见问题

1. **程序卡死**: 可能是死锁导致，检查锁的获取和释放顺序
2. **结果不一致**: 可能是竞争条件，需要使用同步机制保护共享资源
3. **程序不退出**: 可能有非守护线程仍在运行，检查线程的daemon属性

### 调试技巧

1. 使用 `print` 语句观察线程执行顺序
2. 添加延时 `time.sleep()` 来放大竞争条件
3. 使用线程名称来跟踪不同线程的行为
4. 观察系统资源使用情况