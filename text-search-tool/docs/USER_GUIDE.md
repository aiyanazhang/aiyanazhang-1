# æ–‡æœ¬æœç´¢å·¥å…· - è¯¦ç»†æ–‡æ¡£

## æ¦‚è¿°

`text-search.sh` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Shellè„šæœ¬ï¼Œç”¨äºåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœç´¢æ–‡æœ¬å†…å®¹ã€‚å®ƒæ”¯æŒæ™®é€šæ–‡æœ¬æœç´¢å’Œæ­£åˆ™è¡¨è¾¾å¼æœç´¢ï¼Œæä¾›å¤šç§è¾“å‡ºæ ¼å¼ï¼Œå¹¶å…·æœ‰é«˜åº¦å¯é…ç½®çš„é€‰é¡¹ã€‚

## ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ” **çµæ´»æœç´¢**: æ”¯æŒæ–‡æœ¬å’Œæ­£åˆ™è¡¨è¾¾å¼ä¸¤ç§æœç´¢æ¨¡å¼
- ğŸ“ **æ–‡ä»¶è¿‡æ»¤**: æŒ‰æ–‡ä»¶ç±»å‹å’Œç›®å½•è¿›è¡Œç²¾ç¡®è¿‡æ»¤
- ğŸ¨ **å¤šç§è¾“å‡ºæ ¼å¼**: ç®€å•ã€è¯¦ç»†ã€JSONä¸‰ç§è¾“å‡ºæ ¼å¼
- âš¡ **é«˜æ€§èƒ½**: æ”¯æŒå¹¶è¡Œæœç´¢ï¼Œæ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: å¯æ§åˆ¶æœç´¢æ·±åº¦ã€æ–‡ä»¶å¤§å°ç­‰å‚æ•°

### ç”¨æˆ·ä½“éªŒ
- ğŸŒˆ **å½©è‰²è¾“å‡º**: é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ
- ğŸ“Š **è¿›åº¦æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºæœç´¢è¿›åº¦
- ğŸ“ˆ **è¯¦ç»†ç»Ÿè®¡**: å®Œæ•´çš„æœç´¢ç»Ÿè®¡ä¿¡æ¯
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¤„ç†

## å®‰è£…

### å¿«é€Ÿå®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd text-search-tool

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x text-search.sh

# æµ‹è¯•å®‰è£…
./text-search.sh --version
```

### ç³»ç»Ÿå®‰è£…

```bash
# å¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„
sudo cp text-search.sh /usr/local/bin/text-search
sudo chmod +x /usr/local/bin/text-search

# ç°åœ¨å¯ä»¥å…¨å±€ä½¿ç”¨
text-search --help
```

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬è¯­æ³•

```bash
./text-search.sh [é€‰é¡¹] -p <æœç´¢æ¨¡å¼>
```

### å¿…éœ€å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-p, --pattern <æ¨¡å¼>` | æœç´¢æ¨¡å¼ï¼ˆæ–‡æœ¬æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼‰ | `-p "function main"` |

### å¯é€‰å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `-d, --directory <è·¯å¾„>` | æœç´¢ç›®å½• | å½“å‰ç›®å½• | `-d /home/user/project` |
| `-r, --regex` | å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ | false | `-r` |
| `-t, --type <ç±»å‹>` | æ–‡ä»¶ç±»å‹è¿‡æ»¤ | æ‰€æœ‰æ–‡ä»¶ | `-t "py,js,java"` |
| `-e, --exclude <ç›®å½•>` | æ’é™¤ç›®å½• | é»˜è®¤æ’é™¤åˆ—è¡¨ | `-e ".git,node_modules"` |
| `-o, --output <æ ¼å¼>` | è¾“å‡ºæ ¼å¼ | simple | `-o detail` |
| `-n, --line-number` | æ˜¾ç¤ºè¡Œå· | false | `-n` |
| `-c, --count` | åªæ˜¾ç¤ºåŒ¹é…è®¡æ•° | false | `-c` |
| `-l, --files-only` | åªæ˜¾ç¤ºæ–‡ä»¶å | false | `-l` |
| `-v, --verbose` | è¯¦ç»†è¾“å‡ºæ¨¡å¼ | false | `-v` |
| `--no-color` | ç¦ç”¨å½©è‰²è¾“å‡º | false | `--no-color` |
| `--max-depth <æ·±åº¦>` | æœ€å¤§æœç´¢æ·±åº¦ | 10 | `--max-depth 5` |
| `--max-size <å¤§å°>` | æœ€å¤§æ–‡ä»¶å¤§å° | 10M | `--max-size 5M` |
| `-j, --jobs <æ•°é‡>` | å¹¶è¡Œä½œä¸šæ•° | CPUæ ¸å¿ƒæ•° | `-j 4` |

## ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºæœ¬æ–‡æœ¬æœç´¢

```bash
# æœç´¢åŒ…å«"function main"çš„æ–‡ä»¶
./text-search.sh -p "function main"

# åœ¨ç‰¹å®šç›®å½•ä¸­æœç´¢
./text-search.sh -p "TODO" -d /path/to/project

# æ˜¾ç¤ºè¡Œå·
./text-search.sh -p "error" -n
```

### 2. æ­£åˆ™è¡¨è¾¾å¼æœç´¢

```bash
# æœç´¢ä»¥"class"å¼€å¤´çš„è¡Œ
./text-search.sh -p "^class\s+\w+" -r

# æœç´¢å‡½æ•°å®šä¹‰
./text-search.sh -p "function\s+\w+\s*\(" -r

# æœç´¢æ³¨é‡Šä¸­çš„TODO
./text-search.sh -p "//\s*TODO.*" -r
```

### 3. æ–‡ä»¶ç±»å‹è¿‡æ»¤

```bash
# åªæœç´¢Pythonæ–‡ä»¶
./text-search.sh -p "import" -t "py"

# æœç´¢å¤šç§æ–‡ä»¶ç±»å‹
./text-search.sh -p "main" -t "py,js,java,cpp"

# æœç´¢é…ç½®æ–‡ä»¶
./text-search.sh -p "database" -t "json,yaml,yml,conf"
```

### 4. ç›®å½•æ’é™¤

```bash
# æ’é™¤ç‰ˆæœ¬æ§åˆ¶ç›®å½•
./text-search.sh -p "config" -e ".git,.svn"

# æ’é™¤æ„å»ºå’Œä¾èµ–ç›®å½•
./text-search.sh -p "api" -e "node_modules,target,build,dist"

# æ’é™¤æµ‹è¯•ç›®å½•
./text-search.sh -p "function" -e "test,tests,__pycache__"
```

### 5. è¾“å‡ºæ ¼å¼

```bash
# ç®€å•æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
./text-search.sh -p "error" -o simple

# è¯¦ç»†æ ¼å¼ï¼ˆåŒ…å«æ–‡ä»¶ä¿¡æ¯ï¼‰
./text-search.sh -p "TODO" -o detail

# JSONæ ¼å¼ï¼ˆæœºå™¨å¯è¯»ï¼‰
./text-search.sh -p "function" -o json
```

### 6. ç»Ÿè®¡å’Œè®¡æ•°

```bash
# åªæ˜¾ç¤ºåŒ¹é…è®¡æ•°
./text-search.sh -p "function" -c

# åªæ˜¾ç¤ºåŒ…å«åŒ¹é…çš„æ–‡ä»¶å
./text-search.sh -p "TODO" -l

# è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
./text-search.sh -p "error" -v
```

### 7. æ€§èƒ½ä¼˜åŒ–

```bash
# ä½¿ç”¨å¹¶è¡Œæœç´¢
./text-search.sh -p "main" -j 4

# é™åˆ¶æœç´¢æ·±åº¦
./text-search.sh -p "config" --max-depth 3

# é™åˆ¶æ–‡ä»¶å¤§å°
./text-search.sh -p "data" --max-size 1M
```

## è¾“å‡ºæ ¼å¼è¯¦è§£

### ç®€å•æ ¼å¼ (simple)

```
æ–‡ä»¶è·¯å¾„:è¡Œå·: åŒ¹é…å†…å®¹
./src/main.py:15: def main():
./src/utils.py:8: # Main utility functions
```

### è¯¦ç»†æ ¼å¼ (detail)

```
æ–‡ä»¶: ./src/main.py
å¤§å°: 2.5KB
ä¿®æ”¹æ—¶é—´: 2024-01-15 10:30:45
---
è¡Œå· 15: def main():
è¡Œå· 42: if __name__ == "__main__":
åŒ¹é…æ•°: 2

æ–‡ä»¶: ./src/utils.py
å¤§å°: 1.8KB
ä¿®æ”¹æ—¶é—´: 2024-01-15 09:20:30
---
è¡Œå· 8: # Main utility functions
åŒ¹é…æ•°: 1
```

### JSONæ ¼å¼ (json)

```json
{
  "search_summary": {
    "pattern": "main",
    "directory": "./src",
    "regex_mode": false,
    "total_files": 5,
    "total_matches": 8,
    "search_time": "0.12s"
  },
  "results": [
    {
      "file": "./src/main.py",
      "matches": [
        {
          "line": 15,
          "content": "def main():"
        },
        {
          "line": 42,
          "content": "if __name__ == \"__main__\":"
        }
      ]
    }
  ]
}
```

## é…ç½®æ–‡ä»¶

å¯ä»¥åˆ›å»ºé…ç½®æ–‡ä»¶ `~/.text-searchrc` æ¥è®¾ç½®é»˜è®¤å€¼ï¼š

```bash
# æ–‡æœ¬æœç´¢å·¥å…·é…ç½®æ–‡ä»¶

# é»˜è®¤æ’é™¤ç›®å½•
DEFAULT_EXCLUDES=".git,.svn,node_modules,target,.idea,.vscode"

# æœ€å¤§æœç´¢æ·±åº¦
MAX_DEPTH=15

# å½©è‰²è¾“å‡ºå¼€å…³
COLORED_OUTPUT=true

# æœ€å¤§æ–‡ä»¶å¤§å°é™åˆ¶
MAX_FILE_SIZE="20M"

# å¹¶è¡Œä½œä¸šæ•°
PARALLEL_JOBS=4

# è¯¦ç»†æ¨¡å¼å¼€å…³
VERBOSE=false

# é»˜è®¤è¾“å‡ºæ ¼å¼
OUTPUT_FORMAT="simple"
```

## é«˜çº§ç”¨æ³•

### 1. ç»„åˆä½¿ç”¨ç®¡é“

```bash
# å°†ç»“æœä¼ é€’ç»™å…¶ä»–å·¥å…·
./text-search.sh -p "error" -o json | jq '.results[].file' | sort | uniq

# ç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶çš„åŒ¹é…æ•°
./text-search.sh -p "TODO" -c | awk '{print $1, $2}' | sort -nr
```

### 2. è„šæœ¬é›†æˆ

```bash
#!/bin/bash
# é¡¹ç›®ä»£ç è´¨é‡æ£€æŸ¥è„šæœ¬

echo "æ£€æŸ¥TODOé¡¹ç›®..."
./text-search.sh -p "TODO" -c

echo "æ£€æŸ¥FIXMEé¡¹ç›®..."
./text-search.sh -p "FIXME" -c

echo "æ£€æŸ¥debugä»£ç ..."
./text-search.sh -p "console\.log\|print\(" -r -c
```

### 3. æ€§èƒ½ç›‘æ§

```bash
# ä½¿ç”¨timeå‘½ä»¤æµ‹é‡æ€§èƒ½
time ./text-search.sh -p "function" -d /large/project -j 8

# ä½¿ç”¨è¯¦ç»†æ¨¡å¼æŸ¥çœ‹ç»Ÿè®¡
./text-search.sh -p "main" -v | grep "æœç´¢è€—æ—¶"
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é”™è¯¯**
   ```bash
   # ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
   chmod +x text-search.sh
   
   # ç¡®ä¿æœç´¢ç›®å½•å¯è¯»
   ls -la /path/to/search/directory
   ```

2. **æœç´¢ç»“æœä¸ºç©º**
   ```bash
   # æ£€æŸ¥æœç´¢æ¨¡å¼æ˜¯å¦æ­£ç¡®
   ./text-search.sh -p "pattern" -v
   
   # æ£€æŸ¥æ–‡ä»¶ç±»å‹è¿‡æ»¤
   ./text-search.sh -p "pattern" -t "txt" -v
   ```

3. **æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯**
   ```bash
   # æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼
   echo "test string" | grep -E "your_regex"
   
   # ä½¿ç”¨è¯¦ç»†æ¨¡å¼æŸ¥çœ‹æ„å»ºçš„å‘½ä»¤
   ./text-search.sh -p "regex" -r -v
   ```

4. **æ€§èƒ½é—®é¢˜**
   ```bash
   # å‡å°‘æœç´¢æ·±åº¦
   ./text-search.sh -p "pattern" --max-depth 3
   
   # æ’é™¤å¤§ç›®å½•
   ./text-search.sh -p "pattern" -e "node_modules,target,build"
   
   # é™åˆ¶æ–‡ä»¶å¤§å°
   ./text-search.sh -p "pattern" --max-size 1M
   ```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ¨¡å¼æ¥è·å–è°ƒè¯•ä¿¡æ¯ï¼š

```bash
./text-search.sh -p "pattern" -v
```

è¿™å°†æ˜¾ç¤ºï¼š
- è§£æçš„å‚æ•°
- æ„å»ºçš„findå’Œgrepå‘½ä»¤
- æœç´¢è¿›åº¦
- è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯

## æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–

- å¯¹äºå¤§å‹é¡¹ç›®ï¼Œä½¿ç”¨æ–‡ä»¶ç±»å‹è¿‡æ»¤ (`-t`)
- æ’é™¤ä¸å¿…è¦çš„ç›®å½• (`-e`)
- åœ¨å¤šæ ¸ç³»ç»Ÿä¸Šå¯ç”¨å¹¶è¡Œæœç´¢ (`-j`)
- è®¾ç½®åˆç†çš„æœç´¢æ·±åº¦ (`--max-depth`)

### 2. æœç´¢æŠ€å·§

- ä½¿ç”¨ç®€å•çš„æ–‡æœ¬æœç´¢ï¼Œé™¤éç¡®å®éœ€è¦æ­£åˆ™è¡¨è¾¾å¼
- å¯¹äºå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå…ˆåœ¨å°èŒƒå›´å†…æµ‹è¯•
- ä½¿ç”¨è¡Œå·é€‰é¡¹ (`-n`) ä¾¿äºå®šä½ä»£ç 

### 3. ç»“æœå¤„ç†

- å¯¹äºè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œä½¿ç”¨JSONæ ¼å¼è¾“å‡º
- ä½¿ç”¨è®¡æ•°æ¨¡å¼ (`-c`) å¿«é€Ÿè·å¾—ç»Ÿè®¡ä¿¡æ¯
- ä½¿ç”¨æ–‡ä»¶æ¨¡å¼ (`-l`) æ‰¾åˆ°ç›¸å…³æ–‡ä»¶

## ç‰ˆæœ¬å†å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬
  - åŸºæœ¬æ–‡æœ¬å’Œæ­£åˆ™è¡¨è¾¾å¼æœç´¢
  - å¤šç§è¾“å‡ºæ ¼å¼
  - æ–‡ä»¶ç±»å‹è¿‡æ»¤
  - å¹¶è¡Œæœç´¢æ”¯æŒ
  - é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… LICENSE æ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. åœ¨é¡¹ç›®ä»“åº“åˆ›å»º Issue
3. è”ç³»ç»´æŠ¤è€…

---

*æœ€åæ›´æ–°: 2024å¹´9æœˆ24æ—¥*